@model JobPortal.Entities.Models.Concrete.JobSeeker

<h2>Profili Düzenle</h2>

<form method="post" enctype="multipart/form-data">
    <!-- Kişisel Bilgiler -->
    <div>
        <label for="FirstName">Ad:</label>
        <input type="text" id="FirstName" name="FirstName" value="@Model.FirstName" />
    </div>
    <div>
        <label for="LastName">Soyad:</label>
        <input type="text" id="LastName" name="LastName" value="@Model.LastName" />
    </div>
    <div>
        <label for="PhoneNumber">Telefon Numarası:</label>
        <input type="text" id="PhoneNumber" name="PhoneNumber" value="@Model.PhoneNumber" />
    </div>
    <div>
        <label for="Address">Adres:</label>
        <input type="text" id="Address" name="Address" value="@Model.Address" />
    </div>
    <div>
        <label for="Resume">Özgeçmiş Yükle (PDF):</label>
        <input type="file" id="Resume" name="ResumeFile" accept=".pdf" />
    </div>
    <div>
        <label for="ProfilePicture">Profil Fotoğrafı Yükle (JPG, PNG):</label>
        <input type="file" id="ProfilePicture" name="profilePictureFile" accept="image/*" />
    </div>
    <div>
        <label for="Skills">Yetenekler:</label>
        <input type="text" id="Skills" name="Skills" value="@Model.Skills" />
    </div>

    <!-- Eğitim Bilgileri -->
    <h3>Eğitim Bilgileri</h3>
    <div id="education-section">
        @if (Model.Educations != null && Model.Educations.Any())
        {
            var educationIndex = 0;
            foreach (var education in Model.Educations)
            {
                <div class="education-item" id="education-@education.Id">
                    <input type="hidden" name="Educations[@educationIndex].Id" value="@education.Id" />
                    <label for="SchoolName">Okul Adı:</label>
                    <input type="text" name="Educations[@educationIndex].SchoolName" value="@education.SchoolName" /><br />

                    <label for="Department">Bölüm:</label>
                    <input type="text" name="Educations[@educationIndex].Department" value="@education.Department" /><br />

                    <label for="GraduationDegree">Mezuniyet Derecesi:</label>
                    <input type="text" name="Educations[@educationIndex].GraduationDegree" value="@education.GraduationDegree" /><br />

                    <label for="Status">Durum:</label>
                    <input type="text" name="Educations[@educationIndex].Status" value="@education.Status" /><br />

                    <label for="GraduationYear">Mezuniyet Yılı:</label>
                    <input type="number" name="Educations[@educationIndex].GraduationYear" value="@education.GraduationYear" /><br />

                    <button type="button" onclick="removeEducation('@education.Id')">Eğitimi Sil</button>
                </div>
                educationIndex++;
            }
        }
    </div>
    <input type="hidden" id="deleted-educations" name="DeletedEducations" />

    <!-- Sertifika Bilgileri -->
    <h3>Sertifika Bilgileri</h3>
    <div id="certification-section">
        @if (Model.Certifications != null && Model.Certifications.Any())
        {
            var certificationIndex = 0;
            foreach (var certification in Model.Certifications)
            {
                <div class="certification-item" id="certification-@certification.Id">
                    <input type="hidden" name="Certifications[@certificationIndex].Id" value="@certification.Id" />
                    <label for="InstitutionName">Kurum Adı:</label>
                    <input type="text" name="Certifications[@certificationIndex].InstitutionName" value="@certification.InstitutionName" /><br />

                    <label for="CertificateName">Sertifika Adı:</label>
                    <input type="text" name="Certifications[@certificationIndex].CertificateName" value="@certification.CertificateName" /><br />

                    <label for="CertificationDate">Sertifika Alınma Tarihi:</label>
                    <input type="date" name="Certifications[@certificationIndex].CertificationDate" value="@certification.CertificationDate.ToString("yyyy-MM-dd")" /><br />

                    <button type="button" onclick="removeCertification('@certification.Id')">Sertifikayı Sil</button>
                </div>
                certificationIndex++;
            }
        }
    </div>
    <input type="hidden" id="deleted-certifications" name="DeletedCertifications" />

    <button type="button" onclick="addEducation()">Yeni Eğitim Ekle</button>
    <button type="button" onclick="addCertification()">Yeni Sertifika Ekle</button>

    <button type="submit">Kaydet</button>
</form>

<script>
    // Eğitim Silme İşlemi
    function removeEducation(educationId) {
        var element = document.getElementById('education-' + educationId);
        element.style.display = 'none'; // Eğitim satırını gizle
        var deletedEducations = document.getElementById('deleted-educations');
        deletedEducations.value += educationId + ','; // Silinen eğitimleri topla
    }

    // Sertifika Silme İşlemi
    function removeCertification(certificationId) {
        var element = document.getElementById('certification-' + certificationId);
        element.style.display = 'none'; // Sertifika satırını gizle
        var deletedCertifications = document.getElementById('deleted-certifications');
        deletedCertifications.value += certificationId + ','; // Silinen sertifikaları topla
    }

    // Yeni Eğitim Ekleme
    function addEducation() {
        var container = document.getElementById("education-section");
        var index = container.getElementsByClassName('education-item').length;
        var template = `
                    <div class="education-item" id="new-education-` + index + `">
                        <input type="hidden" name="Educations[` + index + `].Id" value="0" />
                        <label for="SchoolName">Okul Adı:</label>
                        <input type="text" name="Educations[` + index + `].SchoolName" /><br />

                        <label for="Department">Bölüm:</label>
                        <input type="text" name="Educations[` + index + `].Department" /><br />

                        <label for="GraduationDegree">Mezuniyet Derecesi:</label>
                        <input type="text" name="Educations[` + index + `].GraduationDegree" /><br />

                        <label for="Status">Durum:</label>
                        <input type="text" name="Educations[` + index + `].Status" /><br />

                        <label for="GraduationYear">Mezuniyet Yılı:</label>
                        <input type="number" name="Educations[` + index + `].GraduationYear" /><br />

                        <button type="button" onclick="removeEducation('new-education-` + index + `')">Eğitimi Sil</button>
                    </div>`;
        container.innerHTML += template;
    }

    // Yeni Sertifika Ekleme
    function addCertification() {
        var container = document.getElementById("certification-section");
        var index = container.getElementsByClassName('certification-item').length;
        var template = `
                    <div class="certification-item" id="new-certification-` + index + `">
                        <input type="hidden" name="Certifications[` + index + `].Id" value="0" />
                        <label for="InstitutionName">Kurum Adı:</label>
                        <input type="text" name="Certifications[` + index + `].InstitutionName" /><br />

                        <label for="CertificateName">Sertifika Adı:</label>
                        <input type="text" name="Certifications[` + index + `].CertificateName" /><br />

                        <label for="CertificationDate">Sertifika Alınma Tarihi:</label>
                        <input type="date" name="Certifications[` + index + `].CertificationDate" /><br />

                        <button type="button" onclick="removeCertification('new-certification-` + index + `')">Sertifikayı Sil</button>
                    </div>`;
        container.innerHTML += template;
    }
</script>